{"version":3,"sources":["app.ts","background.ts","level.ts","levelfactory.ts","playarea.ts","player.ts","playerinput.ts","scorearea.ts","enum/theme.ts","lib/perlin.ts"],"names":["App","App.constructor","App.preload","App.create","App.update","App.register","Background","Background.constructor","Background.fromTheme","Background.fromHsv","Background.makeImages","Background.shadeColor","Background.blendColor","Level","Level.constructor","Level.create","Level.fillLine","Level.createEmptyLine","Level.howManyInThisRow","LevelFactory","LevelFactory.constructor","LevelFactory.createLevel","PlayArea","PlayArea.constructor","PlayArea.setLevel","PlayArea.preload","PlayArea.create","PlayArea.update","Player","Player.constructor","Player.preload","Player.create","Player.update","PlayerInput","PlayerInput.constructor","PlayerInput.isKeyPressed","PlayerInput.otherInputHasKeyPressed","PlayerInput.isLeft","PlayerInput.isRight","ScoreArea","ScoreArea.constructor","ScoreArea.preload","ScoreArea.create","ScoreArea.update","Theme","PerlinNoise","PerlinNoise.constructor","PerlinNoise.noise","PerlinNoise.fade","PerlinNoise.lerp","PerlinNoise.grad","PerlinNoise.scale"],"mappings":"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,EAAEA,EAAEA,EAAEA,EAAEA,EAAEA,GAAGA;YAC9FA,EAAEA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,EAAEA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,EAAEA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,EAAEA,EAAEA,EAAEA,EAAEA,EAAEA,EAAEA,EAAEA,EAAEA,GAAGA,EAAEA,EAAEA,EAAEA,GAAGA;YAC/FA,GAAGA,EAAEA,GAAGA,EAAEA,EAAEA,EAAEA,EAAEA,EAAEA,EAAEA,EAAEA,EAAEA,EAAEA,GAAGA,EAAEA,CAACA,EAAEA,GAAGA,EAAEA,EAAEA,EAAEA,EAAEA,EAAEA,GAAGA,EAAEA,EAAEA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,EAAEA,EAAEA,EAAEA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA;YAC5FA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,EAAEA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,CAACA,EAAEA,EAAEA,EAAEA,EAAEA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA;YAC7FA,CAACA,EAAEA,GAAGA,EAAEA,EAAEA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,EAAEA,EAAEA,EAAEA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,EAAEA,EAAEA,GAAGA,EAAEA,EAAEA,EAAEA,EAAEA,EAAEA,EAAEA,EAAEA,EAAEA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,EAAEA,EAAEA,EAAEA;YAChGA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,CAACA,EAAEA,EAAEA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,EAAEA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,EAAEA,EAAEA,GAAGA,EAAEA,CAACA;YAC3FA,GAAGA,EAAEA,EAAEA,EAAEA,EAAEA,EAAEA,GAAGA,EAAEA,EAAEA,EAAEA,EAAEA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,EAAEA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,EAAEA,EAAEA,GAAGA;YAC5FA,GAAGA,EAAEA,EAAEA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,EAAEA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,EAAEA,EAAEA,EAAEA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,EAAEA,EAAEA,GAAGA,EAAEA,GAAGA;YAC7FA,EAAEA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,EAAEA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,EAAEA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,EAAEA,EAAEA,EAAEA,EAAEA,GAAGA,EAAEA,CAACA,EAAEA,GAAGA,EAAEA,GAAGA;YAC3FA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,EAAEA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,EAAEA,EAAEA,EAAEA,EAAEA,EAAEA,EAAEA,EAAEA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,EAAEA,EAAEA,EAAEA,EAAEA,GAAGA,EAAEA,EAAEA,EAAEA,GAAGA,EAAEA,GAAGA;SAC7FA,CAACA;QACFA,GAAGA,CAACA,CAACA,GAAGA,CAACA,CAACA,GAAGA,CAACA,EAAEA,CAACA,GAAGA,GAAGA,EAAEA,CAACA,EAAEA;YACxBA,CAACA,CAACA,GAAGA,GAAGA,CAACA,CAACA,GAAGA,CAACA,CAACA,CAACA,CAACA,GAAGA,WAAWA,CAACA,CAACA,CAACA,CAACA;QAEvCA,IAAIA,CAACA,GAAGA,IAAIA,CAACA,KAAKA,CAACA,CAACA,CAACA,GAAGA,GAAGA,EACvBA,CAACA,GAAGA,IAAIA,CAACA,KAAKA,CAACA,CAACA,CAACA,GAAGA,GAAGA,EACvBA,CAACA,GAAGA,IAAIA,CAACA,KAAKA,CAACA,CAACA,CAACA,GAAGA,GAAGA,CAACA;QAC5BA,CAACA,IAAIA,IAAIA,CAACA,KAAKA,CAACA,CAACA,CAACA,CAACA;QACnBA,CAACA,IAAIA,IAAIA,CAACA,KAAKA,CAACA,CAACA,CAACA,CAACA;QACnBA,CAACA,IAAIA,IAAIA,CAACA,KAAKA,CAACA,CAACA,CAACA,CAACA;QACnBA,IAAIA,CAACA,GAAGA,IAAIA,CAACA,IAAIA,CAACA,CAACA,CAACA,EAChBA,CAACA,GAAGA,IAAIA,CAACA,IAAIA,CAACA,CAACA,CAACA,EAChBA,CAACA,GAAGA,IAAIA,CAACA,IAAIA,CAACA,CAACA,CAACA,CAACA;QACrBA,IAAIA,CAACA,GAAGA,CAACA,CAACA,CAACA,CAACA,GAAGA,CAACA,EAAEA,EAAEA,GAAGA,CAACA,CAACA,CAACA,CAACA,GAAGA,CAACA,EAAEA,EAAEA,GAAGA,CAACA,CAACA,CAACA,GAAGA,CAACA,CAACA,GAAGA,CAACA,EAC9CA,CAACA,GAAGA,CAACA,CAACA,CAACA,GAAGA,CAACA,CAACA,GAAGA,CAACA,EAAEA,EAAEA,GAAGA,CAACA,CAACA,CAACA,CAACA,GAAGA,CAACA,EAAEA,EAAEA,GAAGA,CAACA,CAACA,CAACA,GAAGA,CAACA,CAACA,GAAGA,CAACA,CAACA;QAEvDA,MAAMA,CAACA,IAAIA,CAACA,KAAKA,CAACA,IAAIA,CAACA,IAAIA,CAACA,CAACA,EAAEA,IAAIA,CAACA,IAAIA,CAACA,CAACA,EAAEA,IAAIA,CAACA,IAAIA,CAACA,CAACA,EAAEA,IAAIA,CAACA,IAAIA,CAACA,CAACA,CAACA,EAAEA,CAACA,EAAEA,CAACA,EAAEA,CAACA,EAAEA,CAACA,CAACA,EAC9EA,IAAIA,CAACA,IAAIA,CAACA,CAACA,CAACA,EAAEA,CAACA,EAAEA,CAACA,GAAGA,CAACA,EAAEA,CAACA,EAAEA,CAACA,CAACA,CAACA,EAC9BA,IAAIA,CAACA,IAAIA,CAACA,CAACA,EAAEA,IAAIA,CAACA,IAAIA,CAACA,CAACA,CAACA,EAAEA,CAACA,EAAEA,CAACA,EAAEA,CAACA,GAAGA,CAACA,EAAEA,CAACA,CAACA,EACtCA,IAAIA,CAACA,IAAIA,CAACA,CAACA,CAACA,EAAEA,CAACA,EAAEA,CAACA,GAAGA,CAACA,EAAEA,CAACA,GAAGA,CAACA,EAAEA,CAACA,CAACA,CAACA,CAACA,EACvCA,IAAIA,CAACA,IAAIA,CAACA,CAACA,EAAEA,IAAIA,CAACA,IAAIA,CAACA,CAACA,EAAEA,IAAIA,CAACA,IAAIA,CAACA,CAACA,CAACA,EAAEA,GAAGA,CAACA,CAACA,EAAEA,CAACA,EAAEA,CAACA,EAAEA,CAACA,GAAGA,CAACA,CAACA,EACvDA,IAAIA,CAACA,IAAIA,CAACA,CAACA,CAACA,EAAEA,GAAGA,CAACA,CAACA,EAAEA,CAACA,GAAGA,CAACA,EAAEA,CAACA,EAAEA,CAACA,GAAGA,CAACA,CAACA,CAACA,EACtCA,IAAIA,CAACA,IAAIA,CAACA,CAACA,EAAEA,IAAIA,CAACA,IAAIA,CAACA,CAACA,CAACA,EAAEA,GAAGA,CAACA,CAACA,EAAEA,CAACA,EAAEA,CAACA,GAAGA,CAACA,EAAEA,CAACA,GAAGA,CAACA,CAACA,EAC9CA,IAAIA,CAACA,IAAIA,CAACA,CAACA,CAACA,EAAEA,GAAGA,CAACA,CAACA,EAAEA,CAACA,GAAGA,CAACA,EAAEA,CAACA,GAAGA,CAACA,EAAEA,CAACA,GAAGA,CAACA,CAACA,CAACA,CAACA,CAACA,CAACA,CAACA;IAC9DA,CAACA;IAEcF,gBAAIA,GAAnBA,UAAoBA,CAASA;QACzBG,MAAMA,CAACA,CAACA,GAAGA,CAACA,GAAGA,CAACA,GAAGA,CAACA,CAACA,GAAGA,CAACA,CAACA,GAAGA,CAACA,GAAGA,EAAEA,CAACA,GAAGA,EAAEA,CAACA,CAACA;IAC/CA,CAACA;IAEcH,gBAAIA,GAAnBA,UAAoBA,CAASA,EAAEA,CAASA,EAAEA,CAASA,IAAYI,MAAMA,CAACA,CAACA,GAAGA,CAACA,GAAGA,CAACA,CAACA,GAAGA,CAACA,CAACA,CAACA,CAACA,CAACA;IAEzEJ,gBAAIA,GAAnBA,UAAoBA,IAAYA,EAAEA,CAASA,EAAEA,CAASA,EAAEA,CAASA;QAC7DK,IAAIA,CAACA,GAAGA,IAAIA,GAAGA,EAAEA,CAACA;QAClBA,IAAIA,CAACA,GAAGA,CAACA,GAAGA,CAACA,GAAGA,CAACA,GAAGA,CAACA,EACjBA,CAACA,GAAGA,CAACA,GAAGA,CAACA,GAAGA,CAACA,GAAGA,CAACA,IAAIA,EAAEA,IAAIA,CAACA,IAAIA,EAAEA,GAAGA,CAACA,GAAGA,CAACA,CAACA;QAC/CA,MAAMA,CAACA,CAACA,CAACA,CAACA,GAAGA,CAACA,CAACA,IAAIA,CAACA,GAAGA,CAACA,GAAGA,CAACA,CAACA,CAACA,GAAGA,CAACA,CAACA,CAACA,GAAGA,CAACA,CAACA,IAAIA,CAACA,GAAGA,CAACA,GAAGA,CAACA,CAACA,CAACA,CAACA;IAC7DA,CAACA;IAEcL,iBAAKA,GAApBA,UAAqBA,CAASA,IAAYM,MAAMA,CAACA,CAACA,CAACA,GAAGA,CAACA,CAACA,GAAGA,CAACA,CAACA,CAACA,CAACA;IACnEN,kBAACA;AAADA,CAxDA,AAwDCA,IAAA","file":"../../built/local/tsc.js","sourcesContent":["/// <reference path=\"../typings/phaser.d.ts\" />\r\n/// <reference path=\"../typings/underscore/underscore.d.ts\" />\r\n\r\nclass App {\r\n    private game: Phaser.Game;\r\n    private static objects: Array<IGameObject> = [];\r\n    private static ranPreload: boolean = false;\r\n    private static ranCreate: boolean = false;\r\n    public static requireTwoInputs: boolean = false;\r\n\r\n    constructor(width: number, height: number) {\r\n        this.game = new Phaser.Game(width, height, Phaser.AUTO, 'content', { preload: this.preload, create: this.create, update: this.update });\r\n        //this.game.time.desiredFps = 60;\r\n    }\r\n\r\n    preload() {\r\n        App.ranPreload = true;\r\n\r\n        _.each(App.objects, o => o.preload());\r\n    }\r\n\r\n    create() {\r\n\r\n        this.game.physics.startSystem(Phaser.Physics.ARCADE);\r\n\r\n        var spacerSize = 160;\r\n        var playAreaWidth = (this.game.width - spacerSize) / 2;\r\n\r\n        var kb = this.game.input.keyboard;\r\n\r\n        var leftKeys = new PlayerInput(kb.addKey(Phaser.Keyboard.A), kb.addKey(Phaser.Keyboard.D));\r\n        var leftArea = new PlayArea(this.game, 0, 0, playAreaWidth, this.game.height, leftKeys);\r\n        leftArea.setLevel(LevelFactory.createLevel(1));\r\n        App.register(leftArea);\r\n\r\n        var rightKeys = new PlayerInput(kb.addKey(Phaser.Keyboard.LEFT), kb.addKey(Phaser.Keyboard.RIGHT));\r\n        var rightArea = new PlayArea(this.game, playAreaWidth + spacerSize, 0, playAreaWidth, this.game.height, rightKeys);\r\n        rightArea.setLevel(LevelFactory.createLevel(1));\r\n        App.register(rightArea);\r\n\r\n        leftKeys.otherInput = rightKeys;\r\n        rightKeys.otherInput = leftKeys;\r\n\r\n        var scoreArea = new ScoreArea(this.game, playAreaWidth, 0, spacerSize, this.game.height);\r\n        App.register(scoreArea);\r\n\r\n        App.ranCreate = true;\r\n        _.each(App.objects, o => o.create());\r\n\r\n\r\n    }\r\n\r\n    update() {\r\n\r\n        _.each(App.objects, o => o.update());\r\n    }\r\n\r\n    public static register(obj: IGameObject) : void {\r\n        this.objects.push(obj);\r\n        if (App.ranPreload) {\r\n            obj.preload();\r\n        }\r\n        if (App.ranCreate) {\r\n            obj.create();\r\n        }\r\n    }\r\n}\r\n\r\nwindow.onload = () => {\r\n    var app = new App(1400, 800);\r\n};","class Background {\r\n\r\n    constructor(public color1: number, public color2: number, public color3: number, public color4: number) {\r\n    }\r\n\r\n    public static fromTheme(theme: Theme): Background {\r\n\r\n        //var randomColor = () => Math.random() + (256 * Math.random()) + (65536 * Math.random());\r\n        var randomColor = (v: number) => {\r\n            var color = this.fromHsv(Math.random(), Math.random(), v);\r\n            return color.r * 65536 + color.g * 256 + color.b;\r\n        };\r\n\r\n        switch (theme) {\r\n            case Theme.NorthernLights:\r\n                return new Background(0x29083F, 0x1BB4B1, 0x3EF2AB, 0x210736);\r\n            case Theme.Nebula:\r\n                return new Background(0x202A52, 0xE46F58, 0x85BEE1, 0x483548);\r\n            case Theme.Random:\r\n                return new Background(randomColor(0.22), randomColor(.4), randomColor(.7), randomColor(.22));\r\n            default:\r\n                return new Background(randomColor(44), randomColor(192), randomColor(128), randomColor(64));\r\n        }\r\n    }\r\n\r\n    private static fromHsv(h: number, s: number, v: number): any {\r\n        var r: number, g: number, b: number, i: number, f: number, p: number, q: number, t: number;\r\n\r\n        i = Math.floor(h * 6);\r\n        f = h * 6 - i;\r\n        p = v * (1 - s);\r\n        q = v * (1 - f * s);\r\n        t = v * (1 - (1 - f) * s);\r\n        switch (i % 6) {\r\n            case 0: r = v, g = t, b = p; break;\r\n            case 1: r = q, g = v, b = p; break;\r\n            case 2: r = p, g = v, b = t; break;\r\n            case 3: r = p, g = q, b = v; break;\r\n            case 4: r = t, g = p, b = v; break;\r\n            case 5: r = v, g = p, b = q; break;\r\n        }\r\n        return {\r\n            r: Math.round(r * 255),\r\n            g: Math.round(g * 255),\r\n            b: Math.round(b * 255)\r\n        };\r\n    }\r\n\r\n    public makeImages(game: Phaser.Game, width: number, height: number): Phaser.BitmapData[] {\r\n        var datas: Phaser.BitmapData[] = [];\r\n\r\n        var key1 = 'perlin:1:' + this.color1;\r\n        var pz1 = Math.random();\r\n        var px1 = Math.random() * width;\r\n        var py1 = Math.random() * height;\r\n        if (game.cache.checkBitmapDataKey(key1)) {\r\n            datas.push(game.cache.getBitmapData(key1));\r\n            //console.log(\"loaded texture '\" + key1 + \"' from cache\");\r\n        } else {\r\n            //console.log(\"creating texture '\" + key1 + \"' with dimensions \" + width + \"x\" + height);\r\n            var data1 = game.add.bitmapData(width, height, key1, true);\r\n            var scale1 = 1 / 4;\r\n            var scale2 = 1 / 2;\r\n            for (var x1 = 0; x1 < width; x1++) {\r\n                for (var y1 = 0; y1 < height; y1++) {\r\n                    var perlinValue1 = PerlinNoise.noise(px1 + scale1 * x1, py1 + scale1 * (Math.min(y1, height - y1)), pz1);\r\n                    var perlinValue2 = PerlinNoise.noise(px1 + scale2 * x1, py1 + scale2 * (Math.min(y1, height - y1)), pz1);\r\n\r\n                    if (perlinValue1 < 0.8 && perlinValue2 > 0.26) {\r\n                        var faded1 = this.shadeColor(this.color1, -perlinValue1);\r\n                        data1.setPixel32(x1, y1, faded1[0], faded1[1], faded1[2], 255, false);\r\n                    } else if (perlinValue1 > 0.4 && perlinValue2 < 0.6) {\r\n                        var faded2 = this.shadeColor(this.color2, perlinValue2 - 0.6);\r\n                        data1.setPixel32(x1, y1, faded2[0], faded2[1], faded2[2], 255, false);\r\n                    }\r\n                    else {\r\n                        var merged = this.blendColor(this.color1, this.color2, perlinValue1);\r\n                        data1.setPixel32(x1, y1, merged[0], merged[1], merged[2], 255, false);\r\n                    }\r\n\r\n                }\r\n            }\r\n            data1.context.putImageData(data1.imageData, 0, 0);\r\n            datas.push(data1);\r\n        }\r\n\r\n        var key3 = 'perlin:3:' + this.color3;\r\n        var pz3 = Math.random();\r\n        var px3 = Math.random() * width;\r\n        var py3 = Math.random() * height;\r\n        if (game.cache.checkBitmapDataKey(key3)) {\r\n            datas.push(game.cache.getBitmapData(key3));\r\n            //console.log(\"loaded texture '\" + key3 + \"' from cache\");\r\n        } else {\r\n            //console.log(\"creating texture '\" + key3 + \"' with dimensions \" + width + \"x\" + height);\r\n            var data3 = game.add.bitmapData(width, height, key3, true);\r\n            var scale3 = 1 / 6;\r\n            for (var x3 = 0; x3 < width; x3++) {\r\n                for (var y3 = 0; y3 < height; y3++) {\r\n                    var perlinValue = PerlinNoise.noise(px3 + scale3 * x3, py3 + scale3 * (Math.min(y3, height - y3)), pz3);\r\n                    if (Math.floor(perlinValue * 100) % 3 === 0 && perlinValue > 0.5) {\r\n                        //if (perlinValue > 0.77) {\r\n                        var faded = this.shadeColor(this.color3, perlinValue * 2 - 1);\r\n                        data3.setPixel32(x3, y3, faded[0], faded[1], faded[2], 64, false);\r\n                    }\r\n                }\r\n            }\r\n            data3.context.putImageData(data3.imageData, 0, 0);\r\n            datas.push(data3);\r\n        }\r\n\r\n        //var data4 = game.add.bitmapData(width, height, 'perlin:4:' + this.color4, true);\r\n        //var scale4 = 2;\r\n        //for (var x4 = 0; x4 < width; x4++) {\r\n        //    for (var y4 = 0; y4 < height; y4++) {\r\n        //        var perlinValue = PerlinNoise.noise(scale4 * x4, scale4 * (Math.min(y4, height - y4)), .5);\r\n        //        var faded = this.shadeColor(this.color4, (perlinValue * 2.5) - 1);\r\n        //        data4.setPixel32(x4, y4, faded[0], faded[1], faded[2], 33, false);\r\n        //    }\r\n        //}\r\n        //data4.context.putImageData(data4.imageData, 0, 0);\r\n        //datas.push(data4);\r\n\r\n        return datas;\r\n    }\r\n\r\n    shadeColor(color: number, percent: number): number[] {\r\n        var f = color, t = percent < 0 ? 0 : 255, p = percent < 0 ? percent * -1 : percent, R = f >> 16, G = f >> 8 & 0x00FF, B = f & 0x0000FF;\r\n        var val = [(Math.round((t - R) * p) + R), (Math.round((t - G) * p) + G), (Math.round((t - B) * p) + B)];\r\n        return val;\r\n    }\r\n\r\n    blendColor(c0: number, c1: number, percent: number): number[] {\r\n        var f = c0, t = c1, R1 = f >> 16, G1 = f >> 8 & 0x00FF, B1 = f & 0x0000FF, R2 = t >> 16, G2 = t >> 8 & 0x00FF, B2 = t & 0x0000FF;\r\n        return [(Math.round((R2 - R1) * percent) + R1), (Math.round((G2 - G1) * percent) + G1), (Math.round((B2 - B1) * percent) + B1)];\r\n    }\r\n}","/// <reference path=\"../typings/underscore/underscore.d.ts\" />\r\n\r\nclass Level {\r\n    public speed: number;\r\n    public data: Uint8Array[]; // 0 = empty, 1 = obstacle, 2 = good drop, 3 = bad drop\r\n    public background: Background;\r\n\r\n    public static create(background: Background, speed: number, lines: number, lineWidth: number, goodDropRate: number, badDropRate: number, obstacleRate: number, maxObstaclesPerLine: number): Level {\r\n        var lv = new Level();\r\n        lv.background = background;\r\n        lv.speed = speed;\r\n        lv.data = [];\r\n\r\n        // A certain number of lines is left blank so the player can 'get started' before things start spawning\r\n        var blankLines = lineWidth * 2;\r\n\r\n        // push the blank lines onto the array\r\n        for (var i = 0; i < blankLines; i++) {\r\n            lv.data.push(this.createEmptyLine(lineWidth));\r\n        }\r\n\r\n        // Now for each real line..\r\n        // Keep track of the total number of good / bad drops and obstacles\r\n        var goodDrops = 0;\r\n        var badDrops = 0;\r\n        var obstacles = 0;\r\n\r\n        for (var j = 0; j < lines; j++) {\r\n            // And for each row,\r\n            // Figure out how many obstacles we'll have\r\n\r\n            // Get a new empty row\r\n            var line = this.createEmptyLine(lineWidth);\r\n            var emptySquares = lineWidth - 2;\r\n            \r\n            var goodDropsInRow = this.howManyInThisRow(j, goodDropRate, goodDrops, 1);\r\n            var badDropsInRow = this.howManyInThisRow(j, badDropRate, badDrops, 1);\r\n            var obstaclesInRow = this.howManyInThisRow(j, obstacleRate, obstacles, maxObstaclesPerLine);\r\n\r\n            this.fillLine(line, 2, goodDropsInRow);\r\n            this.fillLine(line, 3, badDropsInRow);\r\n            this.fillLine(line, 1, obstaclesInRow);\r\n\r\n            lv.data.push(line);\r\n        }\r\n        return lv;\r\n    }\r\n\r\n    private static fillLine(line: Uint8Array, fillValue: number, valuesToFill: number) {\r\n        var emptySquares = 0;\r\n        for (var i = 0; i < line.length; i++) {\r\n            if (line[i] === 0) emptySquares++;\r\n        }\r\n\r\n        while (valuesToFill > 0 && emptySquares >> 0) {\r\n            var x = 0;\r\n            do {\r\n                x = Math.floor(Math.random() * (line.length + 1));\r\n            } while (line[x] !== 0)\r\n            line[x] = 2;\r\n        }\r\n    }\r\n\r\n    private static createEmptyLine(width: number): Uint8Array {\r\n        var newArray = new Uint8Array(width);\r\n        newArray[0] = 1;\r\n        newArray[width - 1] = 1;\r\n        return newArray;\r\n    }\r\n\r\n    private static howManyInThisRow(lineNumber: number, rate: number, totalSoFar: number, maxPerLine : number): number {\r\n        var expectedRate = rate * lineNumber;\r\n\r\n        var shortBy = expectedRate - totalSoFar;\r\n\r\n        if (shortBy < 0)\r\n            return 0;\r\n\r\n        var probability = shortBy / 10;\r\n        var returnCounter = 0;\r\n        while (returnCounter < maxPerLine && probability > Math.random()) {\r\n            returnCounter++;\r\n            probability -= 0.25;\r\n        }\r\n        return 0;\r\n    }\r\n}","class LevelFactory {\r\n    public static createLevel(level: number): Level {\r\n        switch (level) {\r\n        case 1:\r\n            return Level.create(Background.fromTheme(Theme.Random), 20, 60, 14, 0.05, 0.05, 1.2, 2);\r\n        default:\r\n\r\n        }\r\n        \r\n    }\r\n}","/// <reference path=\"../typings/phaser.d.ts\" />\r\n\r\nclass PlayArea implements IGameObject {\r\n    public player: Player;\r\n\r\n    private bg: Background;\r\n    private bgSprite1: Phaser.TileSprite;\r\n    private bgSprite2: Phaser.TileSprite;\r\n\r\n    private currentLevel: Level;\r\n    public setLevel(level: Level): void {\r\n        this.currentLevel = level;\r\n        this.playerY = 0;\r\n        this.bg = level.background;\r\n    }\r\n    public playerY: number;\r\n\r\n    constructor(private game: Phaser.Game, public x: number, public y: number, public width: number, public height: number, public input: PlayerInput) {\r\n    }\r\n\r\n    preload(): void {\r\n    }\r\n\r\n    create(): void {\r\n        var bgImages = this.bg.makeImages(this.game, this.width / 4, this.height / 4);\r\n        this.bgSprite1 = this.game.add.tileSprite(this.x, 0, this.width, this.height, bgImages[0]);\r\n        this.bgSprite1.tileScale.x = 4;\r\n        this.bgSprite1.tileScale.y = 4;\r\n        this.bgSprite2 = this.game.add.tileSprite(this.x, 0, this.width, this.height, bgImages[1]);\r\n        this.bgSprite2.tileScale.x = 4;\r\n        this.bgSprite2.tileScale.y = 4;\r\n\r\n        this.player = new Player(this, this.game);\r\n\r\n        App.register(this.player);\r\n\r\n\r\n    }\r\n\r\n    private counter: number = 0;\r\n    update(): void {\r\n        var delta = (this.game.time.elapsedMS / 1000);\r\n        var speed = 32;\r\n\r\n        this.bgSprite1.tilePosition.y += delta * (speed / 2);\r\n        this.bgSprite2.tilePosition.y += delta * (speed * 2);\r\n    }\r\n}","/// <reference path=\"../typings/phaser.d.ts\" />\r\n\r\nclass Player implements IGameObject {\r\n    private startX: number;\r\n    private startY: number;\r\n\r\n    private g: Phaser.Graphics;\r\n    private size: number = 20;\r\n    private speed: number = 800;\r\n\r\n    private minColor: number = 0x900000;\r\n    private maxColor: number = 0xFF0000;\r\n    private color: number = 0xFF0000;\r\n    private colorIncrement: number = 0x010000;\r\n    private isColorIncreasing: number = 1;\r\n\r\n    private sizeMod: number;\r\n    private frameSize: number;\r\n\r\n    private input: PlayerInput;\r\n    private sprite: Phaser.Sprite;\r\n    private body: Phaser.Physics.Arcade.Body;\r\n\r\n    constructor(private playArea: PlayArea, private game: Phaser.Game) {\r\n        this.startX = playArea.width / 2;\r\n        this.startY = playArea.height - 44;;\r\n    }\r\n\r\n    preload(): void {\r\n\r\n    }\r\n\r\n    create(): void {\r\n        //console.log(\"creating player\");\r\n        this.sprite = new Phaser.Sprite(this.game, this.startX, this.startY);\r\n        this.game.add.existing(this.sprite);\r\n        this.game.physics.arcade.enable(this.sprite);\r\n        this.body = this.sprite.body;\r\n        \r\n        this.body.x = this.startX;\r\n        this.body.y = this.startY;\r\n        this.input = this.playArea.input;\r\n    }\r\n\r\n    update(): void {\r\n        this.body.velocity.x = 0;\r\n        //if (this.body.x < 40) this.body.x = 40;\r\n        //if (this.body.x )\r\n\r\n        this.sizeMod = (0.05 * ((this.color - this.minColor) / (this.maxColor - this.minColor)));\r\n        this.frameSize = this.size * (1 + this.sizeMod);\r\n\r\n        this.body.x = Math.min(Math.max(this.body.x, 0 + (this.frameSize + 40)), this.playArea.width - (this.frameSize + 40));\r\n\r\n        if (this.input.isLeft()) {\r\n            this.body.velocity.x = -this.speed;\r\n        }\r\n        else if (this.input.isRight()) {\r\n            this.body.velocity.x = this.speed;\r\n        }\r\n\r\n        this.color += (this.colorIncrement * this.isColorIncreasing);\r\n        if (this.color >= this.maxColor) {\r\n            this.isColorIncreasing = -1;\r\n            this.color = this.maxColor;\r\n        }\r\n        if (this.color <= this.minColor) {\r\n            this.isColorIncreasing = 32;\r\n            this.color = this.minColor;\r\n        }\r\n    }\r\n}","/// <reference path=\"../typings/phaser.d.ts\" />\r\n\r\nclass PlayerInput {\r\n    public otherInput: PlayerInput;\r\n\r\n    constructor(private leftKey: Phaser.Key, private rightKey: Phaser.Key) {\r\n\r\n    }\r\n\r\n    public isKeyPressed(): boolean {\r\n        return (this.leftKey.isDown || this.rightKey.isDown);\r\n    }\r\n\r\n    private otherInputHasKeyPressed(): boolean {\r\n        if (!this.otherInput) {\r\n            return true;\r\n        }\r\n        return this.otherInput.isKeyPressed();\r\n    }\r\n\r\n    public isLeft(): boolean {\r\n        if (App.requireTwoInputs) {\r\n            return this.otherInputHasKeyPressed() && (this.leftKey.isDown);\r\n        }\r\n        return this.leftKey.isDown;\r\n    }\r\n\r\n    public isRight(): boolean {\r\n        if (App.requireTwoInputs) {\r\n            return this.otherInputHasKeyPressed() && (this.rightKey.isDown);\r\n        }\r\n        return this.rightKey.isDown;\r\n    }\r\n}","class ScoreArea implements IGameObject {\r\n    private g: Phaser.Graphics;\r\n    private bgColor: number = 0x00309A;\r\n\r\n    constructor(private game: Phaser.Game, public x: number, public y: number, public width: number, public height: number) {\r\n        }\r\n\r\n    preload(): void {\r\n        this.g = this.game.add.graphics(this.x, this.y);\r\n    }\r\n\r\n    create(): void {\r\n        this.g.lineStyle(0);\r\n        this.g.beginFill(this.bgColor, 1);\r\n        this.g.drawRect(0, 0, this.width, this.height);\r\n        this.g.endFill();\r\n    }\r\n\r\n    update(): void {\r\n\r\n    }\r\n}","enum Theme { NorthernLights, Nebula, TealParty, Daisies, Random };","// From: http://asserttrue.blogspot.fi/2011/12/perlin-noise-in-javascript_31.html#\r\n// This is a port of Ken Perlin's Java code. The\r\n// original Java code is at http://cs.nyu.edu/%7Eperlin/noise/.\r\n// Note that in this version, a number from 0 to 1 is returned.\r\n\r\nclass PerlinNoise {\r\n    public static noise(x: number, y: number, z: number): number {\r\n        var p = new Array(512);\r\n        var permutation = [151, 160, 137, 91, 90, 15,\r\n            131, 13, 201, 95, 96, 53, 194, 233, 7, 225, 140, 36, 103, 30, 69, 142, 8, 99, 37, 240, 21, 10, 23,\r\n            190, 6, 148, 247, 120, 234, 75, 0, 26, 197, 62, 94, 252, 219, 203, 117, 35, 11, 32, 57, 177, 33,\r\n            88, 237, 149, 56, 87, 174, 20, 125, 136, 171, 168, 68, 175, 74, 165, 71, 134, 139, 48, 27, 166,\r\n            77, 146, 158, 231, 83, 111, 229, 122, 60, 211, 133, 230, 220, 105, 92, 41, 55, 46, 245, 40, 244,\r\n            102, 143, 54, 65, 25, 63, 161, 1, 216, 80, 73, 209, 76, 132, 187, 208, 89, 18, 169, 200, 196,\r\n            135, 130, 116, 188, 159, 86, 164, 100, 109, 198, 173, 186, 3, 64, 52, 217, 226, 250, 124, 123,\r\n            5, 202, 38, 147, 118, 126, 255, 82, 85, 212, 207, 206, 59, 227, 47, 16, 58, 17, 182, 189, 28, 42,\r\n            223, 183, 170, 213, 119, 248, 152, 2, 44, 154, 163, 70, 221, 153, 101, 155, 167, 43, 172, 9,\r\n            129, 22, 39, 253, 19, 98, 108, 110, 79, 113, 224, 232, 178, 185, 112, 104, 218, 246, 97, 228,\r\n            251, 34, 242, 193, 238, 210, 144, 12, 191, 179, 162, 241, 81, 51, 145, 235, 249, 14, 239, 107,\r\n            49, 192, 214, 31, 181, 199, 106, 157, 184, 84, 204, 176, 115, 121, 50, 45, 127, 4, 150, 254,\r\n            138, 236, 205, 93, 222, 114, 67, 29, 24, 72, 243, 141, 128, 195, 78, 66, 215, 61, 156, 180\r\n        ];\r\n        for (var i = 0; i < 256; i++)\r\n            p[256 + i] = p[i] = permutation[i];\r\n\r\n        var X = Math.floor(x) & 255,                  // FIND UNIT CUBE THAT\r\n            Y = Math.floor(y) & 255,                  // CONTAINS POINT.\r\n            Z = Math.floor(z) & 255;\r\n        x -= Math.floor(x);                                // FIND RELATIVE X,Y,Z\r\n        y -= Math.floor(y);                                // OF POINT IN CUBE.\r\n        z -= Math.floor(z);\r\n        var u = this.fade(x),                                // COMPUTE FADE CURVES\r\n            v = this.fade(y),                                // FOR EACH OF X,Y,Z.\r\n            w = this.fade(z);\r\n        var A = p[X] + Y, AA = p[A] + Z, AB = p[A + 1] + Z,      // HASH COORDINATES OF\r\n            B = p[X + 1] + Y, BA = p[B] + Z, BB = p[B + 1] + Z;      // THE 8 CUBE CORNERS,\r\n\r\n        return this.scale(this.lerp(w, this.lerp(v, this.lerp(u, this.grad(p[AA], x, y, z),  // AND ADD\r\n            this.grad(p[BA], x - 1, y, z)), // BLENDED\r\n            this.lerp(u, this.grad(p[AB], x, y - 1, z),  // RESULTS\r\n                this.grad(p[BB], x - 1, y - 1, z))),// FROM  8\r\n            this.lerp(v, this.lerp(u, this.grad(p[AA + 1], x, y, z - 1),  // CORNERS\r\n                this.grad(p[BA + 1], x - 1, y, z - 1)), // OF CUBE\r\n                this.lerp(u, this.grad(p[AB + 1], x, y - 1, z - 1),\r\n                    this.grad(p[BB + 1], x - 1, y - 1, z - 1)))));\r\n    }\r\n\r\n    private static fade(t: number): number {\r\n        return t * t * t * (t * (t * 6 - 15) + 10);\r\n    }\r\n\r\n    private static lerp(t: number, a: number, b: number): number { return a + t * (b - a); }\r\n\r\n    private static grad(hash: number, x: number, y: number, z: number): number {\r\n        var h = hash & 15;                      // CONVERT LO 4 BITS OF HASH CODE\r\n        var u = h < 8 ? x : y,                 // INTO 12 GRADIENT DIRECTIONS.\r\n            v = h < 4 ? y : h == 12 || h == 14 ? x : z;\r\n        return ((h & 1) == 0 ? u : -u) + ((h & 2) == 0 ? v : -v);\r\n    }\r\n\r\n    private static scale(n: number): number { return (1 + n) / 2; }\r\n}"],"sourceRoot":"/source/"}